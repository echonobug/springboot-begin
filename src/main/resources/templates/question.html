<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>问题详情</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="/css/common.css"/>
    <script src="/js/jquery-3.4.1.js" type="application/javascript"></script>
    <script src="/js/bootstrap.min.js" type="application/javascript"></script>
    <script src="/js/question.js" type="application/javascript"></script>
</head>
<body>
<div th:replace="navbar :: navbar"></div>
<div class="container-fluid content">
    <div class="row no-gutters">
        <div class="col-lg-9 col-md-12 col-sm-12 col-12">
            <h4 th:text="${questionAndUser.question.title}"></h4>
            <span class="text-about">
                作者:<span th:text="${questionAndUser.user.name}"></span>
                &nbsp;&nbsp;|&nbsp;&nbsp;阅读数:<span th:text="${questionAndUser.question.viewCount}"></span>
                &nbsp;&nbsp;|&nbsp;&nbsp;发布时间:<span
                    th:text="${#dates.format(questionAndUser.question.gmtCreate, 'yyyy-MM-dd')}"></span>
            </span>
            <hr>
            <div th:text="${questionAndUser.question.description}"></div>
            <hr>
            <ul class="list-inline">
                <li class="list-inline-item"
                    th:if="${session.user ne null && session.user.id eq questionAndUser.user.id}">
                    <img src="/svg/chat.svg" class="icon-sm" alt="">
                    <a data-toggle="collapse" href="#comment-div">评论</a>
                </li>
                <li class="list-inline-item"
                    th:if="${session.user ne null && session.user.id eq questionAndUser.user.id}">
                    <img src="/svg/pencil.svg" class="icon-sm" alt="">
                    <a th:href="'/publish/'+${questionAndUser.question.id}">编辑</a>
                </li>
            </ul>
            <div th:if="${session.user ne null}" class="collapse" id="comment-div">
                <div class="media">
                    <img th:src="${session.user.avatarUrl}" class="pic-head-sm rounded" alt="" src="">
                    <div class="media-body">
                        <h6 class="pt-3 ml-1" th:text="${session.user.name}"></h6>
                    </div>
                </div>
                <textarea id="txt-comment" class="form-control mt-1" rows="3"></textarea>
                <div id="div-alert" class="alert-danger mt-1 rounded"></div>
                <input id="parentId" th:value="${questionAndUser.question.id}" hidden>
                <div class="btn-div">
                    <button id="btn-comment" class="btn btn-primary btn-right mt-1 mb-2">回复</button>
                </div>
            </div>
            <div>
                <h5><span th:text="${questionAndUser.question.commentCount}"></span>个回复</h5>
                <div class="media border-top p-2" th:each="item : ${pageInfo.list}">
                    <!--/*@thymesVar id="item" type="com.jw.springbootbegin.dto.CommentAndUserDTO"*/-->
                    <img th:src="${item.user.avatarUrl}" class="mr-3 pic-head rounded" alt="" src="">
                    <div class="media-body">
                        <div class="text-about" th:text="${item.user.name}"></div>
                        <div th:text="${item.comment.content}"></div>
                    </div>
                </div>
                <nav th:replace="page-nav :: page-nav"></nav>
            </div>
        </div>
        <div class="col-lg-3 col-md-12 col-sm-12 col-12 order-first order-lg-last pl-lg-3 mb-lg-auto mb-4">
            <div class="row no-gutters">
                <div class="col-lg-1 div-line d-none d-lg-block">
                </div>
                <div class="col-lg-11 col-md-12 col-sm-12 col-12 pl-lg-3">
                    <h5>发起人</h5>
                    <div class="media m-3">
                        <img th:src="${questionAndUser.user.avatarUrl}" class="ml-3 mr-2 pic-head rounded" alt=""
                             src="">
                        <div class="media-body">
                            <h6 class="mt-4" th:text="${questionAndUser.user.name}"></h6>
                        </div>
                    </div>
                    <hr>
                    <h5>相关问题</h5>
                    <hr class="d-block d-lg-none">
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>